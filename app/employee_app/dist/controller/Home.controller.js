sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],(e,t,s)=>{"use strict";return e.extend("com.app.employeeapp.controller.Home",{onInit(){const e=new s({first_Name:"",last_Name:"",gender:"",age:"",email:"",phone:"",address:[{city:"",pincode:"",street:"",landmark:""}],department_ID:""});this.getView().setModel(e,"newEmployeeModel")},onCreate:async function(){const e=this,t=this.getView().getModel("newEmployeeModel").getData();const s=this.getOwnerComponent().getModel("ModelV2");await s.create("/employee_Data",t,{success:async function(t,s){sap.m.MessageToast.show("Created");e.byId("_IDGenTable").getBinding("items").refresh();await e.onClose()},error:function(e){sap.m.MessageToast.show("Creation Failed"+e)}})},onDelete:async function(){const e=this;const t=this.byId("_IDGenTable").getSelectedItem(),s=t.getBindingContext().getObject().ID;const n=this.getOwnerComponent().getModel("ModelV2");await n.remove(`/employee_Data('${s}')`,{success:function(t,s){sap.m.MessageToast.show("Deleted");e.byId("_IDGenTable").getBinding("items").refresh()},error:function(e){sap.m.MessageToast.show("Deletion Failed"+e)}})},loadCreateFragment:async function(e){this.oFragment=await t.load({id:this.getView().getId(),name:`com.app.employeeapp.fragments.create`,controller:this});this.getView().addDependent(this.oFragment);this.oFragment.open();if(e.oSource.mProperties.text==="Add"){this.byId("_IDGenButton4").setVisible(false);this.byId("_IDGenButton5").setVisible(true)}else{this.byId("_IDGenButton4").setVisible(true);this.byId("_IDGenButton5").setVisible(false)}},onClose:function(){if(this.oFragment.isOpen()){this.oFragment.close();this.oFragment.destroy();this.getView().getModel("newEmployeeModel").setData({})}},onEdit:async function(e){var s=this.byId("_IDGenTable").getSelectedItem();if(s){this.oFragment=await t.load({id:this.getView().getId(),name:`com.app.employeeapp.fragments.create`,controller:this});this.getView().addDependent(this.oFragment);this.oFragment.open();if(e.oSource.mProperties.text==="Add"){this.byId("_IDGenButton4").setVisible(false);this.byId("_IDGenButton5").setVisible(true)}else{this.byId("_IDGenButton4").setVisible(true);this.byId("_IDGenButton5").setVisible(false)}var n=s.getBindingContext().getObject();this.getView().getModel("newEmployeeModel").setData(n);this.getView().getModel("newEmployeeModel").setProperty("/department_ID",n.department.ID)}else{sap.m.MessageToast.show("Select an item to edit")}},onUpdate:function(){const e=this;const t=this.getView().getModel("newEmployeeModel").getData();const s=this.byId("_IDGenTable").getSelectedItem(),n=s.getBindingContext().getObject().ID;const o=this.getOwnerComponent().getModel("ModelV2");t.department={};t.department_ID=this.byId("_IDGenInput4").getValue();o.update(`/employee_Data('${n}')`,t,{success:async function(t){sap.m.MessageToast.show("Updated successfully");e.byId("_IDGenTable").getBinding("items").refresh();await e.onClose()},error:function(e){sap.m.MessageToast.show("Update Failed"+e)}})}})});
//# sourceMappingURL=Home.controller.js.map